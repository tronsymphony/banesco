{"version":3,"sources":["compare-three-cards-new/script/compare-three-cards-new.js"],"names":["CardsController","_classCallCheck","this","checkboxes","_toConsumableArray","document","querySelectorAll","popUpItems","popup","querySelector","popUpInnerClose","submitButton","handleCheckboxes","submitComparison","_createClass","key","value","_this","dataUrls","contains","item","dataset","url","map","console","log","join","window","location","href","activeItems","classList","checkbox","addEventListener","checked","_this2","handlePopUp","handleSelectedCard","closest","handleUnselectedCard","checkBoxUrl","_this3","thumbnailurl","dataUrl","nonActiveItem","find","src","thumbnailUrl","add","defaultThumbnail","closeButton","correspondingCheckbox","filter","image","remove","_this4","toggle"],"mappings":"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","file":"compare-three-cards-new.min.js","sourcesContent":["class CardsController {\r\n  constructor() {\r\n    this.checkboxes = [...document.querySelectorAll('.compare-three-cards-new__checkbox')]\r\n    this.popUpItems = [...document.querySelectorAll('.compare-three-cards-new__popup-item')]\r\n    this.popup = document.querySelector('.compare-three-cards-new__popup')\r\n    this.popUpInnerClose = document.querySelector('.compare-three-cards-new__popup-inner-close')\r\n    this.submitButton = document.querySelector('.compare-three-cards-new__popup-btn')\r\n\r\n    this.handleCheckboxes()\r\n    this.handleCollapsedState()\r\n    this.submitComparison()\r\n  }\r\n\r\n  submitComparison() {\r\n    this.submitButton.addEventListener('click', () => {\r\n      //window.location.href = '/tarjetas-main/tarjetas-comparar/?query=' + cards.join(',')\r\n      const activeItems = this.popUpItems.filter(\r\n        (item) => item.classList.contains('active') && item.dataset.url,\r\n      )\r\n\r\n      const dataUrls = activeItems.map((item) => item.dataset.url)\r\n\r\n      console.log(dataUrls.join(','))\r\n      window.location.href = '/tarjetas/comparar/?query=' + dataUrls.join(',')\r\n    })\r\n  }\r\n\r\n  handleCheckboxes() {\r\n    this.checkboxes.map((checkbox) => {\r\n      checkbox.addEventListener('click', () => {\r\n        if (checkbox.checked) {\r\n          this.handlePopUp()\r\n          this.handleSelectedCard(checkbox)\r\n        } else {\r\n          const checkBoxUrl = checkbox.closest('.compare-three-cards-new__card').dataset.url\r\n          this.handleUnselectedCard(checkBoxUrl)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleSelectedCard(checkbox) {\r\n    const thumbnailUrl = checkbox.closest('.compare-three-cards-new__card').dataset.thumbnailurl\r\n    const dataUrl = checkbox.closest('.compare-three-cards-new__card').dataset.url\r\n    const nonActiveItem = this.popUpItems.find((item) => !item.classList.contains('active'))\r\n\r\n    if (nonActiveItem) {\r\n      nonActiveItem.dataset.url = dataUrl\r\n      const image = nonActiveItem.querySelector('.compare-three-cards-new__popup-item-image img')\r\n      image.src = thumbnailUrl\r\n      nonActiveItem.classList.add('active')\r\n\r\n      const closeButton = nonActiveItem.querySelector('.compare-three-cards-new__popup-item-close')\r\n      closeButton.addEventListener('click', () => {\r\n        this.handleUnselectedCard(nonActiveItem.dataset.url)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleUnselectedCard(url) {\r\n    const defaultThumbnail = `${origin}/wp-content/themes/banescocontigo8/assets/images/cards/none.png`\r\n    const item = this.popUpItems.find((item) => item.dataset.url === url)\r\n\r\n    if (item) {\r\n      item.dataset.url = ''\r\n      const image = item.querySelector('.compare-three-cards-new__popup-item-image img')\r\n      image.src = defaultThumbnail\r\n      item.classList.remove('active')\r\n      this.checkActivePopUpItems()\r\n\r\n      const correspondingCheckbox = this.checkboxes.find(\r\n        (checkbox) => checkbox.closest('.compare-three-cards-new__card').dataset.url === url,\r\n      )\r\n\r\n      if (correspondingCheckbox) {\r\n        correspondingCheckbox.checked = false\r\n      }\r\n    }\r\n  }\r\n\r\n  checkActivePopUpItems() {\r\n    const activeItems = this.popUpItems.filter((item) => item.classList.contains('active'))\r\n    if (activeItems.length === 0) {\r\n      this.popup.classList.remove('active')\r\n      this.popup.classList.remove('collapsed')\r\n    }\r\n  }\r\n\r\n  handlePopUp() {\r\n    this.popup.classList.add('active')\r\n  }\r\n\r\n  handleCollapsedState() {\r\n    this.popUpInnerClose.addEventListener('click', () => {\r\n      this.popup.classList.toggle('collapsed')\r\n    })\r\n  }\r\n}\r\n\r\nnew CardsController()\r\n"]}