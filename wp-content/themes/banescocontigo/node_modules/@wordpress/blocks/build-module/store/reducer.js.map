{"version":3,"sources":["@wordpress/blocks/src/store/reducer.js"],"names":["combineReducers","__","omit","DEFAULT_CATEGORIES","slug","title","keyBlockTypesByName","types","reduce","newBlockTypes","block","name","getUniqueItemsByName","items","acc","currentItem","some","item","push","unprocessedBlockTypes","state","action","type","blockType","names","blockTypes","blockStyles","Object","fromEntries","entries","map","styles","style","source","filter","blockName","styleNames","indexOf","blockVariations","variations","variation","variationNames","createBlockNameSetterReducer","setActionType","defaultBlockName","freeformFallbackBlockName","unregisteredFallbackBlockName","groupingBlockName","categories","category","keys","length","categoryToChange","find","collections","namespace","icon"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { omit } from '../api/utils';\n\n/**\n * @typedef {Object} WPBlockCategory\n *\n * @property {string} slug  Unique category slug.\n * @property {string} title Category label, for display in user interface.\n */\n\n/**\n * Default set of categories.\n *\n * @type {WPBlockCategory[]}\n */\nexport const DEFAULT_CATEGORIES = [\n\t{ slug: 'text', title: __( 'Text' ) },\n\t{ slug: 'media', title: __( 'Media' ) },\n\t{ slug: 'design', title: __( 'Design' ) },\n\t{ slug: 'widgets', title: __( 'Widgets' ) },\n\t{ slug: 'theme', title: __( 'Theme' ) },\n\t{ slug: 'embed', title: __( 'Embeds' ) },\n\t{ slug: 'reusable', title: __( 'Reusable blocks' ) },\n];\n\n// Key block types by their name.\nfunction keyBlockTypesByName( types ) {\n\treturn types.reduce(\n\t\t( newBlockTypes, block ) => ( {\n\t\t\t...newBlockTypes,\n\t\t\t[ block.name ]: block,\n\t\t} ),\n\t\t{}\n\t);\n}\n\n// Filter items to ensure they're unique by their name.\nfunction getUniqueItemsByName( items ) {\n\treturn items.reduce( ( acc, currentItem ) => {\n\t\tif ( ! acc.some( ( item ) => item.name === currentItem.name ) ) {\n\t\t\tacc.push( currentItem );\n\t\t}\n\t\treturn acc;\n\t}, [] );\n}\n\n/**\n * Reducer managing the unprocessed block types in a form passed when registering the by block.\n * It's for internal use only. It allows recomputing the processed block types on-demand after block type filters\n * get added or removed.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function unprocessedBlockTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_UNPROCESSED_BLOCK_TYPE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockType.name ]: action.blockType,\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\treturn omit( state, action.names );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the processed block types with all filters applied.\n * The state is derived from the `unprocessedBlockTypes` reducer.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBlockTypesByName( action.blockTypes ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\treturn omit( state, action.names );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the block styles.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockStyles( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...Object.fromEntries(\n\t\t\t\t\tObject.entries(\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\n\t\t\t\t\t).map( ( [ name, blockType ] ) => [\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tgetUniqueItemsByName( [\n\t\t\t\t\t\t\t...( blockType.styles ?? [] ).map( ( style ) => ( {\n\t\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\t\tsource: 'block',\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\n\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t] ),\n\t\t\t\t\t] )\n\t\t\t\t),\n\t\t\t};\n\t\tcase 'ADD_BLOCK_STYLES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: getUniqueItemsByName( [\n\t\t\t\t\t...( state[ action.blockName ] ?? [] ),\n\t\t\t\t\t...action.styles,\n\t\t\t\t] ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_STYLES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: (\n\t\t\t\t\tstate[ action.blockName ] ?? []\n\t\t\t\t).filter(\n\t\t\t\t\t( style ) => action.styleNames.indexOf( style.name ) === -1\n\t\t\t\t),\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the block variations.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockVariations( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...Object.fromEntries(\n\t\t\t\t\tObject.entries(\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\n\t\t\t\t\t).map( ( [ name, blockType ] ) => {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tgetUniqueItemsByName( [\n\t\t\t\t\t\t\t\t...( blockType.variations ?? [] ).map(\n\t\t\t\t\t\t\t\t\t( variation ) => ( {\n\t\t\t\t\t\t\t\t\t\t...variation,\n\t\t\t\t\t\t\t\t\t\tsource: 'block',\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\n\t\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t] ),\n\t\t\t\t\t\t];\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t};\n\t\tcase 'ADD_BLOCK_VARIATIONS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: getUniqueItemsByName( [\n\t\t\t\t\t...( state[ action.blockName ] ?? [] ),\n\t\t\t\t\t...action.variations,\n\t\t\t\t] ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_VARIATIONS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: (\n\t\t\t\t\tstate[ action.blockName ] ?? []\n\t\t\t\t).filter(\n\t\t\t\t\t( variation ) =>\n\t\t\t\t\t\taction.variationNames.indexOf( variation.name ) === -1\n\t\t\t\t),\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Higher-order Reducer creating a reducer keeping track of given block name.\n *\n * @param {string} setActionType Action type.\n *\n * @return {Function} Reducer.\n */\nexport function createBlockNameSetterReducer( setActionType ) {\n\treturn ( state = null, action ) => {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\t\tif ( action.names.indexOf( state ) !== -1 ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn state;\n\n\t\t\tcase setActionType:\n\t\t\t\treturn action.name || null;\n\t\t}\n\n\t\treturn state;\n\t};\n}\n\nexport const defaultBlockName = createBlockNameSetterReducer(\n\t'SET_DEFAULT_BLOCK_NAME'\n);\nexport const freeformFallbackBlockName = createBlockNameSetterReducer(\n\t'SET_FREEFORM_FALLBACK_BLOCK_NAME'\n);\nexport const unregisteredFallbackBlockName = createBlockNameSetterReducer(\n\t'SET_UNREGISTERED_FALLBACK_BLOCK_NAME'\n);\nexport const groupingBlockName = createBlockNameSetterReducer(\n\t'SET_GROUPING_BLOCK_NAME'\n);\n\n/**\n * Reducer managing the categories\n *\n * @param {WPBlockCategory[]} state  Current state.\n * @param {Object}            action Dispatched action.\n *\n * @return {WPBlockCategory[]} Updated state.\n */\nexport function categories( state = DEFAULT_CATEGORIES, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_CATEGORIES':\n\t\t\treturn action.categories || [];\n\t\tcase 'UPDATE_CATEGORY': {\n\t\t\tif (\n\t\t\t\t! action.category ||\n\t\t\t\t! Object.keys( action.category ).length\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\tconst categoryToChange = state.find(\n\t\t\t\t( { slug } ) => slug === action.slug\n\t\t\t);\n\t\t\tif ( categoryToChange ) {\n\t\t\t\treturn state.map( ( category ) => {\n\t\t\t\t\tif ( category.slug === action.slug ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t...action.category,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn category;\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\treturn state;\n}\n\nexport function collections( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_COLLECTION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.namespace ]: {\n\t\t\t\t\ttitle: action.title,\n\t\t\t\t\ticon: action.icon,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_COLLECTION':\n\t\t\treturn omit( state, action.namespace );\n\t}\n\treturn state;\n}\n\nexport default combineReducers( {\n\tunprocessedBlockTypes,\n\tblockTypes,\n\tblockStyles,\n\tblockVariations,\n\tdefaultBlockName,\n\tfreeformFallbackBlockName,\n\tunregisteredFallbackBlockName,\n\tgroupingBlockName,\n\tcategories,\n\tcollections,\n} );\n"]}