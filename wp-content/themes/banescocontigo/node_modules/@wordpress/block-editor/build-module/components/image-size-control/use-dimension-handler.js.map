{"version":3,"sources":["@wordpress/block-editor/src/components/image-size-control/use-dimension-handler.js"],"names":["useEffect","useState","useDimensionHandler","customHeight","customWidth","defaultHeight","defaultWidth","onChange","currentWidth","setCurrentWidth","currentHeight","setCurrentHeight","undefined","Number","parseInt","updateDimension","dimension","value","parsedValue","updateDimensions","nextHeight","nextWidth","height","width"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,oBAApC;AAEA,eAAe,SAASC,mBAAT,CACdC,YADc,EAEdC,WAFc,EAGdC,aAHc,EAIdC,YAJc,EAKdC,QALc,EAMb;AAAA;;AACD,QAAM,CAAEC,YAAF,EAAgBC,eAAhB,IAAoCR,QAAQ,SACjDG,WADiD,aACjDA,WADiD,cACjDA,WADiD,GAClCE,YADkC,uCAClB,EADkB,CAAlD;AAGA,QAAM,CAAEI,aAAF,EAAiBC,gBAAjB,IAAsCV,QAAQ,UACnDE,YADmD,aACnDA,YADmD,cACnDA,YADmD,GACnCE,aADmC,yCAClB,EADkB,CAApD,CAJC,CAQD;AACA;AACA;;AACAL,EAAAA,SAAS,CAAE,MAAM;AAChB,QAAKI,WAAW,KAAKQ,SAAhB,IAA6BN,YAAY,KAAKM,SAAnD,EAA+D;AAC9DH,MAAAA,eAAe,CAAEH,YAAF,CAAf;AACA;;AACD,QAAKH,YAAY,KAAKS,SAAjB,IAA8BP,aAAa,KAAKO,SAArD,EAAiE;AAChED,MAAAA,gBAAgB,CAAEN,aAAF,CAAhB;AACA;AACD,GAPQ,EAON,CAAEC,YAAF,EAAgBD,aAAhB,CAPM,CAAT,CAXC,CAoBD;AACA;;AACAL,EAAAA,SAAS,CAAE,MAAM;AAChB,QACCI,WAAW,KAAKQ,SAAhB,IACAC,MAAM,CAACC,QAAP,CAAiBV,WAAjB,MAAmCS,MAAM,CAACC,QAAP,CAAiBN,YAAjB,CAFpC,EAGE;AACDC,MAAAA,eAAe,CAAEL,WAAF,CAAf;AACA;;AACD,QACCD,YAAY,KAAKS,SAAjB,IACAC,MAAM,CAACC,QAAP,CAAiBX,YAAjB,MAAoCU,MAAM,CAACC,QAAP,CAAiBJ,aAAjB,CAFrC,EAGE;AACDC,MAAAA,gBAAgB,CAAER,YAAF,CAAhB;AACA;AACD,GAbQ,EAaN,CAAEC,WAAF,EAAeD,YAAf,CAbM,CAAT;;AAeA,QAAMY,eAAe,GAAG,CAAEC,SAAF,EAAaC,KAAb,KAAwB;AAC/C,UAAMC,WAAW,GAAGD,KAAK,KAAK,EAAV,GAAeL,SAAf,GAA2BE,QAAQ,CAAEG,KAAF,EAAS,EAAT,CAAvD;;AACA,QAAKD,SAAS,KAAK,OAAnB,EAA6B;AAC5BP,MAAAA,eAAe,CAAES,WAAF,CAAf;AACA,KAFD,MAEO;AACNP,MAAAA,gBAAgB,CAAEO,WAAF,CAAhB;AACA;;AACDX,IAAAA,QAAQ,CAAE;AACT,OAAES,SAAF,GAAeE;AADN,KAAF,CAAR;AAGA,GAVD;;AAYA,QAAMC,gBAAgB,GAAG,CAAEC,UAAF,EAAcC,SAAd,KAA6B;AACrDV,IAAAA,gBAAgB,CAAES,UAAF,aAAEA,UAAF,cAAEA,UAAF,GAAgBf,aAAhB,CAAhB;AACAI,IAAAA,eAAe,CAAEY,SAAF,aAAEA,SAAF,cAAEA,SAAF,GAAef,YAAf,CAAf;AACAC,IAAAA,QAAQ,CAAE;AAAEe,MAAAA,MAAM,EAAEF,UAAV;AAAsBG,MAAAA,KAAK,EAAEF;AAA7B,KAAF,CAAR;AACA,GAJD;;AAMA,SAAO;AACNX,IAAAA,aADM;AAENF,IAAAA,YAFM;AAGNO,IAAAA,eAHM;AAINI,IAAAA;AAJM,GAAP;AAMA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\nexport default function useDimensionHandler(\n\tcustomHeight,\n\tcustomWidth,\n\tdefaultHeight,\n\tdefaultWidth,\n\tonChange\n) {\n\tconst [ currentWidth, setCurrentWidth ] = useState(\n\t\tcustomWidth ?? defaultWidth ?? ''\n\t);\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcustomHeight ?? defaultHeight ?? ''\n\t);\n\n\t// When an image is first inserted, the default dimensions are initially\n\t// undefined. This effect updates the dimensions when the default values\n\t// come through.\n\tuseEffect( () => {\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\n\t\t\tsetCurrentWidth( defaultWidth );\n\t\t}\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\n\t\t\tsetCurrentHeight( defaultHeight );\n\t\t}\n\t}, [ defaultWidth, defaultHeight ] );\n\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\n\tuseEffect( () => {\n\t\tif (\n\t\t\tcustomWidth !== undefined &&\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\n\t\t) {\n\t\t\tsetCurrentWidth( customWidth );\n\t\t}\n\t\tif (\n\t\t\tcustomHeight !== undefined &&\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\n\t\t) {\n\t\t\tsetCurrentHeight( customHeight );\n\t\t}\n\t}, [ customWidth, customHeight ] );\n\n\tconst updateDimension = ( dimension, value ) => {\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\n\t\tif ( dimension === 'width' ) {\n\t\t\tsetCurrentWidth( parsedValue );\n\t\t} else {\n\t\t\tsetCurrentHeight( parsedValue );\n\t\t}\n\t\tonChange( {\n\t\t\t[ dimension ]: parsedValue,\n\t\t} );\n\t};\n\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\n\t\tonChange( { height: nextHeight, width: nextWidth } );\n\t};\n\n\treturn {\n\t\tcurrentHeight,\n\t\tcurrentWidth,\n\t\tupdateDimension,\n\t\tupdateDimensions,\n\t};\n}\n"]}