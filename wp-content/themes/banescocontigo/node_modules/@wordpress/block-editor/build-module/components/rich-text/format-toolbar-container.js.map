{"version":3,"sources":["@wordpress/block-editor/src/components/rich-text/format-toolbar-container.js"],"names":["__","Popover","ToolbarGroup","useSelect","isCollapsed","getActiveFormats","useAnchor","store","richTextStore","BlockControls","FormatToolbar","NavigableToolbar","blockEditorStore","InlineSelectionToolbar","editableContentElement","activeFormats","lastFormat","length","lastFormatType","type","settings","select","getFormatType","popoverAnchor","InlineToolbar","FormatToolbarContainer","inline","value","hasInlineToolbar","getSettings"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,EAAT,QAAmB,iBAAnB;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,uBAAtC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SACCC,WADD,EAECC,gBAFD,EAGCC,SAHD,EAICC,KAAK,IAAIC,aAJV,QAKO,sBALP;AAOA;AACA;AACA;;AACA,OAAOC,aAAP,MAA0B,mBAA1B;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,gBAAP,MAA6B,sBAA7B;AACA,SAASJ,KAAK,IAAIK,gBAAlB,QAA0C,aAA1C;;AAEA,SAASC,sBAAT,OAA6E;AAAA,MAA5C;AAAEC,IAAAA,sBAAF;AAA0BC,IAAAA;AAA1B,GAA4C;AAC5E,QAAMC,UAAU,GAAGD,aAAa,CAAEA,aAAa,CAACE,MAAd,GAAuB,CAAzB,CAAhC;AACA,QAAMC,cAAc,GAAGF,UAAH,aAAGA,UAAH,uBAAGA,UAAU,CAAEG,IAAnC;AACA,QAAMC,QAAQ,GAAGjB,SAAS,CACvBkB,MAAF,IAAcA,MAAM,CAAEb,aAAF,CAAN,CAAwBc,aAAxB,CAAuCJ,cAAvC,CADW,EAEzB,CAAEA,cAAF,CAFyB,CAA1B;AAIA,QAAMK,aAAa,GAAGjB,SAAS,CAAE;AAChCQ,IAAAA,sBADgC;AAEhCM,IAAAA;AAFgC,GAAF,CAA/B;AAKA,SAAO,cAAC,aAAD;AAAe,IAAA,aAAa,EAAGG;AAA/B,IAAP;AACA;;AAED,SAASC,aAAT,QAA4C;AAAA,MAApB;AAAED,IAAAA;AAAF,GAAoB;AAC3C,SACC,cAAC,OAAD;AACC,IAAA,SAAS,EAAC,KADX;AAEC,IAAA,YAAY,EAAG,KAFhB;AAGC,IAAA,MAAM,EAAGA,aAHV;AAIC,IAAA,SAAS,EAAC,+CAJX;AAKC,IAAA,kBAAkB,EAAC;AALpB,KAOC,cAAC,gBAAD;AACC,IAAA,SAAS,EAAC;AACV;AAFD;AAGC,kBAAavB,EAAE,CAAE,cAAF;AAHhB,KAKC,cAAC,YAAD,QACC,cAAC,aAAD,OADD,CALD,CAPD,CADD;AAmBA;;AAED,MAAMyB,sBAAsB,GAAG,SAIxB;AAAA,MAJ0B;AAChCC,IAAAA,MADgC;AAEhCZ,IAAAA,sBAFgC;AAGhCa,IAAAA;AAHgC,GAI1B;AACN,QAAMC,gBAAgB,GAAGzB,SAAS,CAC/BkB,MAAF,IAAcA,MAAM,CAAET,gBAAF,CAAN,CAA2BiB,WAA3B,GAAyCD,gBADtB,EAEjC,EAFiC,CAAlC;;AAKA,MAAKF,MAAL,EAAc;AACb,WAAO,cAAC,aAAD;AAAe,MAAA,aAAa,EAAGZ;AAA/B,MAAP;AACA;;AAED,MAAKc,gBAAL,EAAwB;AACvB,UAAMb,aAAa,GAAGV,gBAAgB,CAAEsB,KAAF,CAAtC;;AAEA,QAAKvB,WAAW,CAAEuB,KAAF,CAAX,IAAwB,CAAEZ,aAAa,CAACE,MAA7C,EAAsD;AACrD,aAAO,IAAP;AACA;;AAED,WACC,cAAC,sBAAD;AACC,MAAA,sBAAsB,EAAGH,sBAD1B;AAEC,MAAA,aAAa,EAAGC;AAFjB,MADD;AAMA,GAvBK,CAyBN;;;AACA,SACC,cAAC,aAAD;AAAe,IAAA,KAAK,EAAC;AAArB,KACC,cAAC,aAAD,OADD,CADD;AAKA,CAnCD;;AAqCA,eAAeU,sBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tisCollapsed,\n\tgetActiveFormats,\n\tuseAnchor,\n\tstore as richTextStore,\n} from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InlineSelectionToolbar( { editableContentElement, activeFormats } ) {\n\tconst lastFormat = activeFormats[ activeFormats.length - 1 ];\n\tconst lastFormatType = lastFormat?.type;\n\tconst settings = useSelect(\n\t\t( select ) => select( richTextStore ).getFormatType( lastFormatType ),\n\t\t[ lastFormatType ]\n\t);\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement,\n\t\tsettings,\n\t} );\n\n\treturn <InlineToolbar popoverAnchor={ popoverAnchor } />;\n}\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( {\n\tinline,\n\teditableContentElement,\n\tvalue,\n} ) => {\n\tconst hasInlineToolbar = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().hasInlineToolbar,\n\t\t[]\n\t);\n\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\tif ( hasInlineToolbar ) {\n\t\tconst activeFormats = getActiveFormats( value );\n\n\t\tif ( isCollapsed( value ) && ! activeFormats.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<InlineSelectionToolbar\n\t\t\t\teditableContentElement={ editableContentElement }\n\t\t\t\tactiveFormats={ activeFormats }\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n"]}