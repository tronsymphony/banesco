{"version":3,"sources":["@wordpress/block-editor/src/hooks/color.js"],"names":["classnames","addFilter","getBlockSupport","useMemo","Platform","useCallback","createHigherOrderComponent","getColorClassName","getColorObjectByAttributeValues","__experimentalGetGradientClass","cleanEmptyObject","transformStyles","shouldSkipSerialization","useBlockSettings","useSetting","InspectorControls","useHasColorPanel","default","StylesColorPanel","BlockColorContrastChecker","COLOR_SUPPORT_KEY","hasColorSupport","blockType","colorSupport","link","gradient","background","text","hasLinkColorSupport","OS","hasGradientSupport","gradients","hasBackgroundColorSupport","hasTextColorSupport","addAttributes","settings","attributes","backgroundColor","Object","assign","type","textColor","addSaveProps","props","hasGradient","style","shouldSerialize","feature","textClass","undefined","gradientClass","backgroundClass","serializeHasBackground","hasBackground","color","newClassName","className","elements","addEditProps","existingGetEditWrapperProps","getEditWrapperProps","styleToAttributes","textColorValue","textColorSlug","startsWith","substring","length","backgroundColorValue","backgroundColorSlug","gradientValue","gradientSlug","updatedStyle","attributesToStyle","ColorInspectorControl","children","resetAllFilter","attributesResetAllFilter","existingStyle","ColorEdit","clientId","name","setAttributes","isEnabled","value","onChange","newStyle","defaultControls","enableContrastChecking","withColorPaletteStyles","BlockListBlock","userPalette","themePalette","defaultPalette","colors","extraStyles","wrapperProps","MIGRATION_PATHS","linkColor","addTransforms","result","source","index","results","destinationBlockType","activeSupports"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useMemo, Platform, useCallback } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport { __experimentalGetGradientClass } from '../components/gradients';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport useSetting from '../components/use-setting';\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tuseHasColorPanel,\n\tdefault as StylesColorPanel,\n} from '../components/global-styles/color-panel';\nimport BlockColorContrastChecker from './contrast-checker';\n\nexport const COLOR_SUPPORT_KEY = 'color';\n\nconst hasColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\nconst hasLinkColorSupport = ( blockType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\nconst hasGradientSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\nconst hasBackgroundColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\nconst hasTextColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Filters registered block settings, extending attributes to include\n * `backgroundColor` and `textColor` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasColorSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.backgroundColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tbackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\tif ( ! settings.attributes.textColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\ttextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\tif ( hasGradientSupport( settings ) && ! settings.attributes.gradient ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tgradient: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject colors classnames.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( props, blockType, attributes ) {\n\tif (\n\t\t! hasColorSupport( blockType ) ||\n\t\tshouldSkipSerialization( blockType, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst hasGradient = hasGradientSupport( blockType );\n\n\t// I'd have preferred to avoid the \"style\" attribute usage here\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\tconst shouldSerialize = ( feature ) =>\n\t\t! shouldSkipSerialization( blockType, COLOR_SUPPORT_KEY, feature );\n\n\t// Primary color classes must come before the `has-text-color`,\n\t// `has-background` and `has-link-color` classes to maintain backwards\n\t// compatibility and avoid block invalidations.\n\tconst textClass = shouldSerialize( 'text' )\n\t\t? getColorClassName( 'color', textColor )\n\t\t: undefined;\n\n\tconst gradientClass = shouldSerialize( 'gradients' )\n\t\t? __experimentalGetGradientClass( gradient )\n\t\t: undefined;\n\n\tconst backgroundClass = shouldSerialize( 'background' )\n\t\t? getColorClassName( 'background-color', backgroundColor )\n\t\t: undefined;\n\n\tconst serializeHasBackground =\n\t\tshouldSerialize( 'background' ) || shouldSerialize( 'gradients' );\n\tconst hasBackground =\n\t\tbackgroundColor ||\n\t\tstyle?.color?.background ||\n\t\t( hasGradient && ( gradient || style?.color?.gradient ) );\n\n\tconst newClassName = classnames(\n\t\tprops.className,\n\t\ttextClass,\n\t\tgradientClass,\n\t\t{\n\t\t\t// Don't apply the background class if there's a custom gradient.\n\t\t\t[ backgroundClass ]:\n\t\t\t\t( ! hasGradient || ! style?.color?.gradient ) &&\n\t\t\t\t!! backgroundClass,\n\t\t\t'has-text-color':\n\t\t\t\tshouldSerialize( 'text' ) &&\n\t\t\t\t( textColor || style?.color?.text ),\n\t\t\t'has-background': serializeHasBackground && hasBackground,\n\t\t\t'has-link-color':\n\t\t\t\tshouldSerialize( 'link' ) && style?.elements?.link?.color,\n\t\t}\n\t);\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Filters registered block settings to extend the block edit wrapper\n * to apply the desired styles and classnames properly.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addEditProps( settings ) {\n\tif (\n\t\t! hasColorSupport( settings ) ||\n\t\tshouldSkipSerialization( settings, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn settings;\n\t}\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\t\treturn addSaveProps( props, settings, attributes );\n\t};\n\n\treturn settings;\n}\n\nfunction styleToAttributes( style ) {\n\tconst textColorValue = style?.color?.text;\n\tconst textColorSlug = textColorValue?.startsWith( 'var:preset|color|' )\n\t\t? textColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst backgroundColorValue = style?.color?.background;\n\tconst backgroundColorSlug = backgroundColorValue?.startsWith(\n\t\t'var:preset|color|'\n\t)\n\t\t? backgroundColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst gradientValue = style?.color?.gradient;\n\tconst gradientSlug = gradientValue?.startsWith( 'var:preset|gradient|' )\n\t\t? gradientValue.substring( 'var:preset|gradient|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.color = {\n\t\t...updatedStyle.color,\n\t\ttext: textColorSlug ? undefined : textColorValue,\n\t\tbackground: backgroundColorSlug ? undefined : backgroundColorValue,\n\t\tgradient: gradientSlug ? undefined : gradientValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\ttextColor: textColorSlug,\n\t\tbackgroundColor: backgroundColorSlug,\n\t\tgradient: gradientSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\tcolor: {\n\t\t\t...attributes.style?.color,\n\t\t\ttext: attributes.textColor\n\t\t\t\t? 'var:preset|color|' + attributes.textColor\n\t\t\t\t: attributes.style?.color?.text,\n\t\t\tbackground: attributes.backgroundColor\n\t\t\t\t? 'var:preset|color|' + attributes.backgroundColor\n\t\t\t\t: attributes.style?.color?.background,\n\t\t\tgradient: attributes.gradient\n\t\t\t\t? 'var:preset|gradient|' + attributes.gradient\n\t\t\t\t: attributes.style?.color?.gradient,\n\t\t},\n\t};\n}\n\nfunction ColorInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"color\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function ColorEdit( props ) {\n\tconst { clientId, name, attributes, setAttributes } = props;\n\tconst settings = useBlockSettings( name );\n\tconst isEnabled = useHasColorPanel( settings );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( {\n\t\t\tstyle: attributes.style,\n\t\t\ttextColor: attributes.textColor,\n\t\t\tbackgroundColor: attributes.backgroundColor,\n\t\t\tgradient: attributes.gradient,\n\t\t} );\n\t}, [\n\t\tattributes.style,\n\t\tattributes.textColor,\n\t\tattributes.backgroundColor,\n\t\tattributes.gradient,\n\t] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( props.name, [\n\t\tCOLOR_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\tconst enableContrastChecking =\n\t\tPlatform.OS === 'web' &&\n\t\t! value?.color?.gradient &&\n\t\t( settings?.color?.text || settings?.color?.link ) &&\n\t\t// Contrast checking is enabled by default.\n\t\t// Deactivating it requires `enableContrastChecker` to have\n\t\t// an explicit value of `false`.\n\t\tfalse !==\n\t\t\tgetBlockSupport( props.name, [\n\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t'enableContrastChecker',\n\t\t\t] );\n\n\treturn (\n\t\t<StylesColorPanel\n\t\t\tas={ ColorInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t\tenableContrastChecker={\n\t\t\t\tfalse !==\n\t\t\t\tgetBlockSupport( props.name, [\n\t\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t\t'enableContrastChecker',\n\t\t\t\t] )\n\t\t\t}\n\t\t>\n\t\t\t{ enableContrastChecking && (\n\t\t\t\t<BlockColorContrastChecker clientId={ clientId } />\n\t\t\t) }\n\t\t</StylesColorPanel>\n\t);\n}\n\n/**\n * This adds inline styles for color palette colors.\n * Ideally, this is not needed and themes should load their palettes on the editor.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withColorPaletteStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst { backgroundColor, textColor } = attributes;\n\t\tconst userPalette = useSetting( 'color.palette.custom' );\n\t\tconst themePalette = useSetting( 'color.palette.theme' );\n\t\tconst defaultPalette = useSetting( 'color.palette.default' );\n\t\tconst colors = useMemo(\n\t\t\t() => [\n\t\t\t\t...( userPalette || [] ),\n\t\t\t\t...( themePalette || [] ),\n\t\t\t\t...( defaultPalette || [] ),\n\t\t\t],\n\t\t\t[ userPalette, themePalette, defaultPalette ]\n\t\t);\n\t\tif (\n\t\t\t! hasColorSupport( name ) ||\n\t\t\tshouldSkipSerialization( name, COLOR_SUPPORT_KEY )\n\t\t) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\t\tconst extraStyles = {};\n\n\t\tif (\n\t\t\ttextColor &&\n\t\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'text' )\n\t\t) {\n\t\t\textraStyles.color = getColorObjectByAttributeValues(\n\t\t\t\tcolors,\n\t\t\t\ttextColor\n\t\t\t)?.color;\n\t\t}\n\t\tif (\n\t\t\tbackgroundColor &&\n\t\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'background' )\n\t\t) {\n\t\t\textraStyles.backgroundColor = getColorObjectByAttributeValues(\n\t\t\t\tcolors,\n\t\t\t\tbackgroundColor\n\t\t\t)?.color;\n\t\t}\n\n\t\tlet wrapperProps = props.wrapperProps;\n\t\twrapperProps = {\n\t\t\t...props.wrapperProps,\n\t\t\tstyle: {\n\t\t\t\t...extraStyles,\n\t\t\t\t...props.wrapperProps?.style,\n\t\t\t},\n\t\t};\n\n\t\treturn <BlockListBlock { ...props } wrapperProps={ wrapperProps } />;\n\t}\n);\n\nconst MIGRATION_PATHS = {\n\tlinkColor: [ [ 'style', 'elements', 'link', 'color', 'text' ] ],\n\ttextColor: [ [ 'textColor' ], [ 'style', 'color', 'text' ] ],\n\tbackgroundColor: [\n\t\t[ 'backgroundColor' ],\n\t\t[ 'style', 'color', 'background' ],\n\t],\n\tgradient: [ [ 'gradient' ], [ 'style', 'color', 'gradient' ] ],\n};\n\nexport function addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tlinkColor: hasLinkColorSupport( destinationBlockType ),\n\t\ttextColor: hasTextColorSupport( destinationBlockType ),\n\t\tbackgroundColor: hasBackgroundColorSupport( destinationBlockType ),\n\t\tgradient: hasGradientSupport( destinationBlockType ),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/color/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/color/addSaveProps',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/color/addEditProps',\n\taddEditProps\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/color/with-color-palette-styles',\n\twithColorPaletteStyles\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/color/addTransforms',\n\taddTransforms\n);\n"]}