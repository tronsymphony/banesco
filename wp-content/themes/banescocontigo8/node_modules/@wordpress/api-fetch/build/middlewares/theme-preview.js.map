{"version":3,"sources":["@wordpress/api-fetch/src/middlewares/theme-preview.js"],"names":["createThemePreviewMiddleware","themePath","options","next","url","theme_preview","path"],"mappings":";;;;;;;AAGA;;AAHA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,4BAA4B,GAAKC,SAAF,IAAiB,CAAEC,OAAF,EAAWC,IAAX,KAAqB;AAC1E,MACC,OAAOD,OAAO,CAACE,GAAf,KAAuB,QAAvB,IACA,CAAE,sBAAaF,OAAO,CAACE,GAArB,EAA0B,eAA1B,CAFH,EAGE;AACDF,IAAAA,OAAO,CAACE,GAAR,GAAc,uBAAcF,OAAO,CAACE,GAAtB,EAA2B;AACxCC,MAAAA,aAAa,EAAEJ;AADyB,KAA3B,CAAd;AAGA;;AAED,MACC,OAAOC,OAAO,CAACI,IAAf,KAAwB,QAAxB,IACA,CAAE,sBAAaJ,OAAO,CAACI,IAArB,EAA2B,eAA3B,CAFH,EAGE;AACDJ,IAAAA,OAAO,CAACI,IAAR,GAAe,uBAAcJ,OAAO,CAACI,IAAtB,EAA4B;AAC1CD,MAAAA,aAAa,EAAEJ;AAD2B,KAA5B,CAAf;AAGA;;AAED,SAAOE,IAAI,CAAED,OAAF,CAAX;AACA,CApBD;;eAsBeF,4B","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addQueryArgs, hasQueryArg } from '@wordpress/url';\n\n/**\n * This appends a `theme_preview` parameter to the REST API request URL if\n * the admin URL contains a `theme` GET parameter.\n *\n * @param {Record<string, any>} themePath\n * @return {import('../types').APIFetchMiddleware} Preloading middleware.\n */\nconst createThemePreviewMiddleware = ( themePath ) => ( options, next ) => {\n\tif (\n\t\ttypeof options.url === 'string' &&\n\t\t! hasQueryArg( options.url, 'theme_preview' )\n\t) {\n\t\toptions.url = addQueryArgs( options.url, {\n\t\t\ttheme_preview: themePath,\n\t\t} );\n\t}\n\n\tif (\n\t\ttypeof options.path === 'string' &&\n\t\t! hasQueryArg( options.path, 'theme_preview' )\n\t) {\n\t\toptions.path = addQueryArgs( options.path, {\n\t\t\ttheme_preview: themePath,\n\t\t} );\n\t}\n\n\treturn next( options );\n};\n\nexport default createThemePreviewMiddleware;\n"]}