{"version":3,"sources":["@wordpress/api-fetch/src/middlewares/theme-preview.js"],"names":["addQueryArgs","hasQueryArg","createThemePreviewMiddleware","themePath","options","next","url","theme_preview","path"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAT,EAAuBC,WAAvB,QAA0C,gBAA1C;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,4BAA4B,GAAKC,SAAF,IAAiB,CAAEC,OAAF,EAAWC,IAAX,KAAqB;AAC1E,MACC,OAAOD,OAAO,CAACE,GAAf,KAAuB,QAAvB,IACA,CAAEL,WAAW,CAAEG,OAAO,CAACE,GAAV,EAAe,eAAf,CAFd,EAGE;AACDF,IAAAA,OAAO,CAACE,GAAR,GAAcN,YAAY,CAAEI,OAAO,CAACE,GAAV,EAAe;AACxCC,MAAAA,aAAa,EAAEJ;AADyB,KAAf,CAA1B;AAGA;;AAED,MACC,OAAOC,OAAO,CAACI,IAAf,KAAwB,QAAxB,IACA,CAAEP,WAAW,CAAEG,OAAO,CAACI,IAAV,EAAgB,eAAhB,CAFd,EAGE;AACDJ,IAAAA,OAAO,CAACI,IAAR,GAAeR,YAAY,CAAEI,OAAO,CAACI,IAAV,EAAgB;AAC1CD,MAAAA,aAAa,EAAEJ;AAD2B,KAAhB,CAA3B;AAGA;;AAED,SAAOE,IAAI,CAAED,OAAF,CAAX;AACA,CApBD;;AAsBA,eAAeF,4BAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addQueryArgs, hasQueryArg } from '@wordpress/url';\n\n/**\n * This appends a `theme_preview` parameter to the REST API request URL if\n * the admin URL contains a `theme` GET parameter.\n *\n * @param {Record<string, any>} themePath\n * @return {import('../types').APIFetchMiddleware} Preloading middleware.\n */\nconst createThemePreviewMiddleware = ( themePath ) => ( options, next ) => {\n\tif (\n\t\ttypeof options.url === 'string' &&\n\t\t! hasQueryArg( options.url, 'theme_preview' )\n\t) {\n\t\toptions.url = addQueryArgs( options.url, {\n\t\t\ttheme_preview: themePath,\n\t\t} );\n\t}\n\n\tif (\n\t\ttypeof options.path === 'string' &&\n\t\t! hasQueryArg( options.path, 'theme_preview' )\n\t) {\n\t\toptions.path = addQueryArgs( options.path, {\n\t\t\ttheme_preview: themePath,\n\t\t} );\n\t}\n\n\treturn next( options );\n};\n\nexport default createThemePreviewMiddleware;\n"]}