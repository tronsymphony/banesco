{"version":3,"sources":["compare-three-cards-new/script/compare-three-cards-new.js"],"names":["CardsController","_classCallCheck","this","checkboxes","_toConsumableArray","document","querySelectorAll","popUpItems","popup","querySelector","popUpInnerClose","submitButton","handleCheckboxes","handleCollapsedState","submitComparison","_createClass","key","value","addEventListener","item","dataset","url","map","console","join","window","location","href","dataUrls","_this2","checkbox","activeItems","handlePopUp","handleSelectedCard","checkBoxUrl","closest","handleUnselectedCard","_this3","thumbnailUrl","thumbnailurl","nonActiveItem","classList","contains","dataUrl","src","image","closeButton","correspondingCheckbox","checked","filter","length","remove","_this4","toggle"],"mappings":"qiEAAMA,gBAAe,WACnB,SAAAA,IAAcC,gBAAAC,KAAAF,GACZE,KAAKC,WAAUC,mBAAOC,SAASC,iBAAiB,uCAChDJ,KAAKK,WAAUH,mBAAOC,SAASC,iBAAiB,yCAChDJ,KAAKM,MAAQH,SAASI,cAAc,mCACpCP,KAAKQ,gBAAkBL,SAASI,cAAc,+CAC9CP,KAAKS,aAAeN,SAASI,cAAc,uCAE3CP,KAAKU,mBACLV,KAAKW,uBACLX,KAAKY,kBACP,CAqFC,OArFAC,aAAAf,EAAA,EAAAgB,IAAA,mBAAAC,MAVD,WAAAjB,IAAAA,EAAAA,KAAcC,KAAAA,aAAAiB,iBAAAlB,SAAA,WAEZ,IAKKY,EALUR,EAAAA,WAAOC,QAClB,SAACG,GAAAA,OAAQH,EAAAA,UAASI,SAAc,WAAAU,EAAAC,QAAAC,GAAA,IAIbC,KAAA,SAAAH,GAAA,OAAAA,EAAAC,QAAAC,GAAA,IAEvBE,QAAKT,IAAAA,EAAkBU,KAAA,MACzBC,OAAAC,SAAAC,KAAA,6BAAAC,EAAAJ,KAAA,IAACT,GAcD,GAAC,CAAAC,IAAA,mBAAAC,MAED,WAdmB,IAAAY,EAAA3B,KAejBA,KAdAC,WAAKQ,KAAaO,SAAAA,GAehBY,EAdAZ,iBAAA,SAAA,WACA,GAAMa,EAAAA,QACCF,EAAAG,cACNH,EAAAI,mBAAAH,OAEKF,CAAgC,IAAAM,EAAkBb,EAAGc,QAAA,kCAAAf,QAAAC,IAACQ,EAAAO,qBAAAF,EAE5DX,CAeA,GACF,GACF,GAAC,CAAAP,IAAA,qBAAAC,MAED,SAhBCa,GAAA,IAAAO,EAAAnC,KAAAoC,EAED1B,EAAAA,QAAmB,kCAAAQ,QAAAmB,aAAAV,EAAAC,EAAAK,QAAA,kCAAAf,QAAAC,IACbmB,EAAgBtC,KAAAK,WAACuB,MAAa,SAAAX,GAAA,OAAAA,EAAAsB,UAAAC,SAAA,SAAA,IAkB9BF,IACFA,EAhBSR,QAAAA,IAAaW,EACbV,EAAAA,cAA4B,kDAClCW,IAAMN,EAiBTE,EAhBUN,UAAcJ,IAAAA,UAEtBU,EAAA/B,cAAA,8CACAS,iBAAA,SAAA,WACFmB,EAAAD,qBAAAI,EAAApB,QAAAC,IACJ,IAkBA,GAAC,CAAAL,IAAA,uBAAAC,MAED,SAlB6BI,GAmB3B,IAlBMiB,EAAeR,GAAAA,OAAAA,OAASK,mEACxBQ,EAAOzC,KAAG4B,WAASK,MAAQ,SAAAhB,GAAA,OAAAA,EAAAC,QAAAC,MAAgCA,CAAED,IAoBnE,GAnBgDD,EAAA,CAAuCA,EAACC,QAAAC,IAAA,GAEpFmB,EAAe/B,cAAA,kDACjB+B,IAAAA,EAoBArB,EAnBAsB,UAAcD,OAAAA,UAoBdtC,KAnBA2C,wBAqBA,IAlBMC,EAAcN,KAAc/B,WAAAA,MAClCqC,SAAAA,GAAAA,OAAY5B,EAAAA,QAAiB,kCAAeE,QAAAC,MAAAA,CAAA,IAG9C0B,IACFA,EAAAC,SAAA,EAAChC,CAqBD,GAAC,CAAAA,IAAA,wBAAAC,MAED,WAnBuE,IAApBG,KAAQC,WAAW4B,QAAA,SAAA9B,GAAA,OAAAA,EAAAsB,UAAAC,SAAA,SAAA,IAACQ,SAErEhD,KAAIiB,MAAMsB,UAAAU,OAAA,UAqBRjD,KApBAiB,MAAKC,UAAc+B,OAAE,aAsBzB,GAAC,CAAAnC,IAAA,cAAAC,MAED,WACEf,KAnBEM,MAAMuC,UAAAA,IAAAA,SAoBV,GAAC,CAAA/B,IAAA,uBAAAC,MAED,WAlBQ8B,IAAAA,EAAAA,KAmBN7C,KAAKQ,gBAlBDqC,iBAAgC,SAAK,WAmBvCK,EAlBA5C,MAAAiC,UAAAY,OAAA,YAmBF,GACF,KAACrD,CAAA,CAhGkB,GAmGrB,IArBGiB","file":"compare-three-cards-new.min.js","sourcesContent":["class CardsController {\r\n  constructor() {\r\n    this.checkboxes = [...document.querySelectorAll('.compare-three-cards-new__checkbox')]\r\n    this.popUpItems = [...document.querySelectorAll('.compare-three-cards-new__popup-item')]\r\n    this.popup = document.querySelector('.compare-three-cards-new__popup')\r\n    this.popUpInnerClose = document.querySelector('.compare-three-cards-new__popup-inner-close')\r\n    this.submitButton = document.querySelector('.compare-three-cards-new__popup-btn')\r\n\r\n    this.handleCheckboxes()\r\n    this.handleCollapsedState()\r\n    this.submitComparison()\r\n  }\r\n\r\n  submitComparison() {\r\n    this.submitButton.addEventListener('click', () => {\r\n      //window.location.href = '/tarjetas-main/tarjetas-comparar/?query=' + cards.join(',')\r\n      const activeItems = this.popUpItems.filter(\r\n        (item) => item.classList.contains('active') && item.dataset.url,\r\n      )\r\n\r\n      const dataUrls = activeItems.map((item) => item.dataset.url)\r\n\r\n      console.log(dataUrls.join(','))\r\n      window.location.href = '/tarjetas/comparar/?query=' + dataUrls.join(',')\r\n    })\r\n  }\r\n\r\n  handleCheckboxes() {\r\n    this.checkboxes.map((checkbox) => {\r\n      checkbox.addEventListener('click', () => {\r\n        if (checkbox.checked) {\r\n          this.handlePopUp()\r\n          this.handleSelectedCard(checkbox)\r\n        } else {\r\n          const checkBoxUrl = checkbox.closest('.compare-three-cards-new__card').dataset.url\r\n          this.handleUnselectedCard(checkBoxUrl)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleSelectedCard(checkbox) {\r\n    const thumbnailUrl = checkbox.closest('.compare-three-cards-new__card').dataset.thumbnailurl\r\n    const dataUrl = checkbox.closest('.compare-three-cards-new__card').dataset.url\r\n    const nonActiveItem = this.popUpItems.find((item) => !item.classList.contains('active'))\r\n\r\n    if (nonActiveItem) {\r\n      nonActiveItem.dataset.url = dataUrl\r\n      const image = nonActiveItem.querySelector('.compare-three-cards-new__popup-item-image img')\r\n      image.src = thumbnailUrl\r\n      nonActiveItem.classList.add('active')\r\n\r\n      const closeButton = nonActiveItem.querySelector('.compare-three-cards-new__popup-item-close')\r\n      closeButton.addEventListener('click', () => {\r\n        this.handleUnselectedCard(nonActiveItem.dataset.url)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleUnselectedCard(url) {\r\n    const defaultThumbnail = `${origin}/wp-content/themes/banescocontigo8/assets/images/cards/none.png`\r\n    const item = this.popUpItems.find((item) => item.dataset.url === url)\r\n\r\n    if (item) {\r\n      item.dataset.url = ''\r\n      const image = item.querySelector('.compare-three-cards-new__popup-item-image img')\r\n      image.src = defaultThumbnail\r\n      item.classList.remove('active')\r\n      this.checkActivePopUpItems()\r\n\r\n      const correspondingCheckbox = this.checkboxes.find(\r\n        (checkbox) => checkbox.closest('.compare-three-cards-new__card').dataset.url === url,\r\n      )\r\n\r\n      if (correspondingCheckbox) {\r\n        correspondingCheckbox.checked = false\r\n      }\r\n    }\r\n  }\r\n\r\n  checkActivePopUpItems() {\r\n    const activeItems = this.popUpItems.filter((item) => item.classList.contains('active'))\r\n    if (activeItems.length === 0) {\r\n      this.popup.classList.remove('active')\r\n      this.popup.classList.remove('collapsed')\r\n    }\r\n  }\r\n\r\n  handlePopUp() {\r\n    this.popup.classList.add('active')\r\n  }\r\n\r\n  handleCollapsedState() {\r\n    this.popUpInnerClose.addEventListener('click', () => {\r\n      this.popup.classList.toggle('collapsed')\r\n    })\r\n  }\r\n}\r\n\r\nnew CardsController()\r\n"]}